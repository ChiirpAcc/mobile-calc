<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CHIIRP Demo – Calculator</title>
    <style>
      /* ─────────── 0 ▸ RESET & VARIABLES ─────────── */
      *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
      html,body{height:100%;-webkit-text-size-adjust:100%}
      :root{--gold-050:#fff9e5;--gold-300:#ffd453;--gold-500:#fcb900;--gold-600:#d99e00;--text-dark:#002844;--hl-grad:linear-gradient(135deg,#b9973b 0%,#80652b 100%);--radius:12px}
      /* ─────────── 1 ▸ GLOBAL LAYOUT ─────────── */
      body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;line-height:1.5;-webkit-font-smoothing:antialiased;background:var(--gold-050);color:var(--text-dark);display:flex;flex-direction:column}
      .slide{flex:1 0 100%;width:100%;max-width:560px;margin:auto;padding:clamp(1rem,4vw,1.75rem);display:none;flex-direction:column;align-items:center;justify-content:flex-start;background:linear-gradient(180deg,#59461f 0%,var(--gold-600) 100%);opacity:0;transition:opacity .6s ease}
      .slide.active{display:flex;opacity:1}
      @supports(padding:env(safe-area-inset-bottom)){body{padding-bottom:env(safe-area-inset-bottom)}}
      /* ─────────── 2 ▸ TYPOGRAPHY ─────────── */
      .heading-xl{font-size:clamp(2rem,6vw,2.75rem);font-weight:700;color:#fff;text-align:center;margin-bottom:.25rem}
      .heading-md{color:#fff;font-weight:400;font-size:clamp(1rem,4vw,1.25rem);text-align:center;margin-bottom:1.5rem}
      .subhead{font-size:.9rem;font-weight:300;color:#e8e8e8;margin-bottom:1rem;text-align:center}
      /* ─────────── 3 ▸ INPUTS ─────────── */
      .inputs-group{display:flex;flex-direction:column;gap:1.25rem;width:100%;margin-block:1.5rem}
      input[type=number]{width:100%;padding:.9rem 1rem;font-size:1rem;border:none;border-radius:var(--radius);text-align:center;background:#fff;color:#1a1a1a;box-shadow:0 1px 4px rgba(0,0,0,.1)}
      input[type=number]::-webkit-outer-spin-button,input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
      input[type=number]:focus{outline:2px solid var(--gold-500);outline-offset:1px}
      /* ─────────── 4 ▸ BUTTONS ─────────── */
      button{appearance:none;border:none;border-radius:var(--radius);padding:.85rem 1.6rem;font-size:1rem;font-weight:700;cursor:pointer;background:var(--gold-500);color:var(--text-dark);transition:filter .2s}
      button:disabled{filter:grayscale(1) opacity(.5);cursor:not-allowed}
      button:not(:disabled):hover{filter:brightness(1.1)}
      button.full{width:100%}
      button.secondary{background:#fff;color:var(--text-dark)}
      .nav-row{width:100%;display:flex;gap:1rem;margin-top:2rem}
      /* ─────────── 5 ▸ TABLES ─────────── */
      table{width:100%;border-collapse:collapse;margin-bottom:1.25rem;font-size:.9rem;color:#fff}
      th,td{padding:.5rem .4rem;border-bottom:1px solid rgba(255,255,255,.25);text-align:left}
      @media(max-width:420px){table{display:none}}
      /* ─────────── 6 ▸ HIGHLIGHT BLOCKS ─────────── */
      .highlight{width:100%;background:var(--hl-grad);border-radius:var(--radius);padding:1.25rem;text-align:center;margin-block:1.25rem}
      .highlight-number{font-size:clamp(2.5rem,10vw,3rem);font-weight:700;color:var(--gold-300);text-shadow:0 2px 6px rgba(0,0,0,.4)}
      .highlight-label{text-transform:uppercase;font-size:.9rem;letter-spacing:.04em;color:#d9d9d9;margin-top:.35rem}
      /* ─────────── 7 ▸ DESKTOP POLISH ─────────── */
      @media(min-width:640px){.slide{border-radius:16px}}
      /* ─────────── 8 ▸ RESTART BUTTON ─────────── */
      .restartBtn{position:fixed;bottom:1.5rem;right:1rem;z-index:999}
    </style>
  </head>
  <body>
    <!-- ───────────── Slide 1 – INPUTS ───────────── -->
    <section id="slideInputs" class="slide active" style="display:flex;opacity:1" role="region" aria-labelledby="title-input">
      <h1 id="title-input" class="heading-xl">CHIIRP DEMO</h1>
      <p class="heading-md">SEE THE VALUE OF CHIIRP</p>
      <div class="inputs-group" role="group" aria-label="Business metrics">
        <input id="quotes" type="number" step="1" min="0" placeholder="Estimates sent per month" aria-label="Estimates sent per month" />
        <input id="quoteWins" type="number" step="1" min="0" placeholder="Estimates accepted" aria-label="Estimates accepted" />
        <input id="leads" type="number" step="1" min="0" placeholder="Lead form submissions per month" aria-label="Lead form submissions per month" />
        <input id="formWins" type="number" step="1" min="0" placeholder="Jobs scheduled from forms" aria-label="Jobs scheduled from forms" />
        <input id="missedCalls" type="number" step="1" min="0" placeholder="Missed calls per month" aria-label="Missed calls per month" />
        <input id="missedWins" type="number" step="1" min="0" placeholder="Jobs scheduled from missed calls" aria-label="Jobs scheduled from missed calls" />
        <input id="avgRev" type="number" step="0.01" min="0" placeholder="Avg revenue per job ($)" aria-label="Average revenue per job" />
        <input type="hidden" name="plan" value="1050" />
      </div>
      <button id="calcBtn" class="full">Next →</button>
    </section>

    <!-- ───────────── Slide 2 – ESTIMATION FOLLOW‑UP ───────────── -->
    <section id="slideEst" class="slide" style="display:none;opacity:0" aria-labelledby="title-followup">
      <h2 id="title-followup" class="heading-xl">Estimate: Follow‑Up</h2>
      <p class="subhead">Based on <strong><em>your</em></strong> monthly quotes and wins</p>
      <table>
        <thead><tr><th>Metric</th><th>Value</th></tr></thead>
        <tbody id="estValues"></tbody>
      </table>
      <div class="highlight"><p id="estGainMonthly" class="highlight-number">—</p><p class="highlight-label">per month</p></div>
      <div class="highlight"><p id="estGainAnnual" class="highlight-number">—</p><p class="highlight-label">per year</p></div>
      <div class="nav-row">
        <button id="backToInputs" class="secondary">← Back</button>
        <button id="toS2L">Next →</button>
      </div>
    </section>

    <!-- ───────────── Slide 3 – SPEED‑TO‑LEAD ───────────── -->
    <section id="slideS2L" class="slide" style="display:none;opacity:0" aria-labelledby="title-s2l">
      <h2 id="title-s2l" class="heading-xl">Speed‑to‑Lead</h2>
      <p class="subhead">Based on <strong><em>your</em></strong> monthly form submissions and wins</p>
      <table>
        <thead><tr><th>Metric</th><th>Value</th></tr></thead>
        <tbody id="s2lValues"></tbody>
      </table>
      <div class="highlight"><p id="s2lGainMonthly" class="highlight-number">—</p><p class="highlight-label">per month</p></div>
      <div class="highlight"><p id="s2lGainAnnual" class="highlight-number">—</p><p class="highlight-label">per year</p></div>
      <div class="nav-row">
        <button id="backToEst" class="secondary">← Back</button>
        <button id="toMissed">Next →</button>
      </div>
    </section>

    <!-- ───────────── Slide 4 – ABANDONED‑CALL RECOVERY ───────────── -->
    <section id="slideMissed" class="slide" style="display:none;opacity:0" aria-labelledby="title-missed">
      <h2 id="title-missed" class="heading-xl">Abandoned‑Call Recovery</h2>
      <p class="subhead">Based on <strong><em>your</em></strong> monthly abandoned calls and wins</p>
      <table>
        <thead><tr><th>Metric</th><th>Value</th></tr></thead>
        <tbody id="missValues"></tbody>
      </table>
      <div class="highlight"><p id="missGainMonthly" class="highlight-number">—</p><p class="highlight-label">per month</p></div>
      <div class="highlight"><p id="missGainAnnual" class="highlight-number">—</p><p class="highlight-label">per year</p></div>
      <div class="nav-row">
        <button id="backToS2L" class="secondary">← Back</button>
        <button id="toSum">Next →</button>
      </div>
    </section>

    <!-- ───────────── Slide 5 – SUMMARY ───────────── -->
    <section id="slideSum" class="slide" style="display:none;opacity:0" aria-labelledby="title-summary">
      <h2 id="title-summary" class="heading-xl">Total Additional Revenue</h2>
      <table>
        <thead><tr><th>Campaign</th><th>Monthly Gain</th></tr></thead>
        <tbody id="sumValues"></tbody>
      </table>
      <div class="highlight" id="sumMonthlyPair"><p id="sumGainMonthly" class="highlight-number">—</p><p class="highlight-label">per month</p></div>
      <div class="highlight"><p id="sumGainAnnual" class="highlight-number">—</p><p class="highlight-label">per year</p></div>
      <div class="highlight"><p id="sumROI" class="highlight-number">—×</p><p class="highlight-label">ROI</p></div>
      <div class="nav-row" style="margin-top:1.5rem">
        <button id="backToMissed" class="secondary">← Back</button>
      </div>
    </section>

    <!-- Restart button -->
    <button class="restartBtn" onclick="location.reload()">Restart ↻</button>
  </body>
</html>




<script>
(function () {
  const g = id => document.getElementById(id);

  // revenue buckets per campaign
  let revLowEst = 0, revHighEst = 0;
  let revLowS2L = 0, revHighS2L = 0;
  let revLowMiss = 0, revHighMiss = 0;

  /* explicit skip markers */
let skippedEst  = false;
let skippedS2L  = false;
let skippedMiss = false;


  /* UI helpers */
  function revealSlide(id) {
    document.querySelectorAll('.slide').forEach(s => s.style.display = 'none');
    const el = g(id);
    el.style.display = 'block';
    requestAnimationFrame(() => el.style.opacity = 1);
  }

  function fmtMoney(n) {
    return n.toLocaleString('en-US', { maximumFractionDigits: 0 });
  }
  function fmtRange(lo, hi) {
    const low = Math.round(lo);
    const high = Math.round(hi);
    return low <= 0
      ? `Up to $${fmtMoney(high)}`
      : `$${fmtMoney(low)} – $${fmtMoney(high)}`;
  }
  function fmtROI(lo, hi) {
    const l = Number(lo) || 0;
    const h = Number(hi) || 0;
    const f = x => Number(x).toFixed(1);
    return l <= 1
      ? `Up to ${f(h)}×`
      : `${f(l)}× – ${f(h)}×`;
  }

  /* core calculator */
  function calcRange({ current, pool, lowPct, highPct, avgRev }) {
    const baselineLow = pool * lowPct;
    const baselineHigh = pool * highPct;

    const lowWins = Math.max(baselineLow, current);

    // if user is already beating our high case, bump by 5.298 %
    let highWins = current > baselineHigh ? current * 1.05298 : baselineHigh;
    if (highWins < lowWins) highWins = lowWins;      // guard

    return {
      lowWins,
      highWins,
      revLow:  (lowWins  - current) * avgRev,
      revHigh: (highWins - current) * avgRev
    };
  }

  /* 1) Inputs → Estimate Follow-Up */
  g('calcBtn').addEventListener('click', () => {
    const Q = +g('quotes').value;
    const AR = +g('avgRev').value;
    skippedS2L = false;
    const W3 = +g('quoteWins').value;
// === enhanced skip of Follow‑Up =========================================
if (!Q && !W3) {
  revLowEst = revHighEst = 0;                // nothing from this campaign
  skippedEst = true;              // <‑‑ NEW line
  g('toS2L').click();                        // programmatically continue flow
  return;
}
// === end enhanced skip ==================================================

// === end skip block ===

    const { lowWins, highWins, revLow, revHigh } = calcRange({
      current: W3, pool: Q, lowPct: 0.10, highPct: 0.20, avgRev: AR
    });
    revLowEst = revLow;
    revHighEst = revHigh;
    skippedEst = false;

    g('estValues').innerHTML = [
      ['Quotes / mo',        Q],
      ['Chiirp wins (low)',  lowWins.toFixed(1)],
      ['Chiirp wins (high)', highWins.toFixed(1)],
      ['Monthly gain',       fmtRange(revLowEst, revHighEst)]
    ].map(([l, v]) => `<tr><td>${l}</td><td>${v}</td></tr>`).join('');

    g('estGainMonthly').textContent = fmtRange(revLowEst, revHighEst);
    g('estGainAnnual').textContent  = fmtRange(revLowEst * 12, revHighEst * 12);

    revealSlide('slideEst');
  });

  /* 2) Estimate → Speed-to-Lead */
  g('toS2L').addEventListener('click', () => {
    const F = +g('leads').value;
    const AR = +g('avgRev').value;
    const W1 = +g('formWins').value;
    
// === enhanced skip of Speed‑to‑Lead (handles double‑skip) ===============
if (!F && !W1) {
  skippedS2L = true; 
  revLowS2L = revHighS2L = 0;               // this campaign contributes zero


  const M  = +g('missedCalls').value;
  const W2 = +g('missedWins').value;


  // -------- CASE 2a: Missed‑Call inputs ALSO blank  --------------------
  if (!M && !W2) {
    skippedMiss = true; 
  
    
    const monthlyCost = +document.querySelector('input[name="plan"]').value || 0;
    const lowTotal  = revLowEst + revLowS2L + revLowMiss;
    const highTotal = revHighEst + revHighS2L + revHighMiss;
    const roiLow  = monthlyCost ? lowTotal  / monthlyCost : 0;
    const roiHigh = monthlyCost ? highTotal / monthlyCost : 0;

    const rows = [
      revLowEst || revHighEst ? ['Estimation Follow‑Up', fmtRange(revLowEst, revHighEst)] : null
    ].filter(Boolean);

    g('sumValues').innerHTML = rows
      .map(([l,v]) => `<tr><td>${l}</td><td>${v}</td></tr>`)
      .join('');
    g('sumGainMonthly').textContent = fmtRange(lowTotal, highTotal);
    g('sumGainAnnual').textContent  = fmtRange(lowTotal * 12, highTotal * 12);
    g('sumROI').textContent         = fmtROI(roiLow, roiHigh);

    revealSlide('slideSum');        // jump straight to summary
    return;
  }

  // -------- CASE 2b: We DO have Missed‑Call numbers  --------------------
  const { lowWins, highWins, revLow, revHigh } = calcRange({
    current: W2, pool: M, lowPct: 0.20, highPct: 0.35, avgRev: AR
  });
  revLowMiss  = revLow;
  revHighMiss = revHigh;
  skippedMiss = false;
  
  g('missValues').innerHTML = [
    ['Abandoned calls / mo', M],
    ['With Chiirp (low)',    lowWins.toFixed(1)],
    ['With Chiirp (high)',   highWins.toFixed(1)],
    ['Monthly gain',         fmtRange(revLowMiss, revHighMiss)]
  ].map(([l,v]) => `<tr><td>${l}</td><td>${v}</td></tr>`).join('');

  g('missGainMonthly').textContent = fmtRange(revLowMiss, revHighMiss);
  g('missGainAnnual').textContent  = fmtRange(revLowMiss * 12, revHighMiss * 12);

  revealSlide('slideMissed');      // now fully populated
  return;
}
// === end enhanced skip ==================================================

// === end skip block ===

    const { lowWins, highWins, revLow, revHigh } = calcRange({
      current: W1, pool: F, lowPct: 0.15, highPct: 0.35, avgRev: AR
    });
    revLowS2L = revLow;
    revHighS2L = revHigh;
    
    g('s2lValues').innerHTML = [
      ['Form submissions / mo', F],
      ['With Chiirp (low)',     lowWins.toFixed(1)],
      ['With Chiirp (high)',    highWins.toFixed(1)],
      ['Monthly gain',          fmtRange(revLowS2L, revHighS2L)]
    ].map(([l, v]) => `<tr><td>${l}</td><td>${v}</td></tr>`).join('');

    g('s2lGainMonthly').textContent = fmtRange(revLowS2L, revHighS2L);
    g('s2lGainAnnual').textContent  = fmtRange(revLowS2L * 12, revHighS2L * 12);

    revealSlide('slideS2L');
  });

  /* 3) Speed-to-Lead → Abandoned-Call Recovery */
  g('toMissed').addEventListener('click', () => {
    const M = +g('missedCalls').value;
    const W2 = +g('missedWins').value || 0;
    const AR = +g('avgRev').value;
// === skip Missed‑Call Recovery when both missed‑call inputs are blank ===
if (!M && !W2) {
  skippedMiss = true;
  revLowMiss = revHighMiss = 0;

  /* build summary immediately */
  const monthlyCost = +document.querySelector('input[name="plan"]').value || 0;
  const lowTotal  = revLowEst  + revLowS2L  + revLowMiss;
  const highTotal = revHighEst + revHighS2L + revHighMiss;
  const roiLow  = monthlyCost ? lowTotal  / monthlyCost : 0;
  const roiHigh = monthlyCost ? highTotal / monthlyCost : 0;

  const rows = [
    revLowEst || revHighEst ? ['Estimation Follow‑Up', fmtRange(revLowEst, revHighEst)] : null,
    revLowS2L || revHighS2L ? ['Speed‑to‑Lead',        fmtRange(revLowS2L, revHighS2L)] : null
  ].filter(Boolean);

  g('sumValues').innerHTML   = rows.map(([l,v]) => `<tr><td>${l}</td><td>${v}</td></tr>`).join('');
  g('sumGainMonthly').textContent = fmtRange(lowTotal, highTotal);
  g('sumGainAnnual').textContent  = fmtRange(lowTotal * 12, highTotal * 12);
  g('sumROI').textContent         = fmtROI(roiLow, roiHigh);

  revealSlide('slideSum');
  return;
}
// === end skip block ===

    const { lowWins, highWins, revLow, revHigh } = calcRange({
      current: W2, pool: M, lowPct: 0.20, highPct: 0.35, avgRev: AR
    });
    revLowMiss = revLow;
    revHighMiss = revHigh;
    skippedMiss = false;

    g('missValues').innerHTML = [
      ['Abandoned calls / mo', M],
      ['With Chiirp (low)',    lowWins.toFixed(1)],
      ['With Chiirp (high)',   highWins.toFixed(1)],
      ['Monthly gain',         fmtRange(revLowMiss, revHighMiss)]
    ].map(([l, v]) => `<tr><td>${l}</td><td>${v}</td></tr>`).join('');

    g('missGainMonthly').textContent = fmtRange(revLowMiss, revHighMiss);
    g('missGainAnnual').textContent  = fmtRange(revLowMiss * 12, revHighMiss * 12);

    revealSlide('slideMissed');
  });



/* 4) Abandoned‑Call → Summary */
g('toSum').addEventListener('click', () => {
  const monthlyCost = +document.querySelector('input[name="plan"]').value || 0;

  const lowTotal  = revLowEst  + revLowS2L  + revLowMiss;
  const highTotal = revHighEst + revHighS2L + revHighMiss;

  const roiLow  = monthlyCost > 0 ? lowTotal  / monthlyCost : 0;
  const roiHigh = monthlyCost > 0 ? highTotal / monthlyCost : 0;

  // build rows only for campaigns that have non‑zero gains
  const rows = [
    revLowEst  || revHighEst  ? ['Estimation Follow‑Up', fmtRange(revLowEst,  revHighEst)] : null,
    revLowS2L  || revHighS2L  ? ['Speed‑to‑Lead',        fmtRange(revLowS2L,  revHighS2L)] : null,
    revLowMiss || revHighMiss ? ['Call Recovery',        fmtRange(revLowMiss, revHighMiss)] : null
  ].filter(Boolean);

  g('sumValues').innerHTML = rows
    .map(([l, v]) => `<tr><td>${l}</td><td>${v}</td></tr>`)
    .join('');

  g('sumGainMonthly').textContent = fmtRange(lowTotal, highTotal);
  g('sumGainAnnual').textContent  = fmtRange(lowTotal * 12, highTotal * 12);
  g('sumROI').textContent         = fmtROI(roiLow, roiHigh);

  revealSlide('slideSum');
});

  /* back navigation */
/* back navigation ------------------------------------------------------*/
g('backToInputs').addEventListener('click', () => revealSlide('slideInputs'));

/* ← from Speed‑to‑Lead */
g('backToEst').addEventListener('click', () => {
  // If the Estimate slide was skipped, jump straight to Inputs
  revealSlide(skippedEst ? 'slideInputs' : 'slideEst');
});

/* ← from Missed‑Call Recovery */
g('backToS2L').addEventListener('click', () => {
  if (skippedS2L) {
    // Speed‑to‑Lead was skipped; fall back to whichever slide exists
    revealSlide(skippedEst ? 'slideInputs' : 'slideEst');
  } else {
    revealSlide('slideS2L');
  }
});

/* ← from Summary */
g('backToMissed').addEventListener('click', () => {
  if (skippedMiss) {                              // Missed‑Call skipped
    if (skippedS2L) {                             // S2L also skipped
      revealSlide(skippedEst ? 'slideInputs' : 'slideEst');
    } else {
      revealSlide('slideS2L');
    }
  } else {
    revealSlide('slideMissed');
  }
});
/* ---------------------------------------------------------------------*/



})();
</script>



</body>
</html>
  
